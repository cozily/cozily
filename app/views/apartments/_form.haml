=render "neighborhoods/name", :neighborhoods => apartment.address.present? ? apartment.neighborhoods : []

-semantic_form_for apartment do |f|
  =f.error_messages
  -f.inputs do
    =hidden_field_tag "apartment[feature_ids][]"

    -f.object.build_address unless f.object.address.present?
    =f.input :full_address, :label => "Address"
    =f.input :unit, :label => "Unit No."
    =f.input :rent, :label => "Rent ($)"
    =f.input :bedrooms, :label => "Bedrooms (#)"
    =f.input :bathrooms, :label => "Bathrooms (#)"
    =f.input :square_footage
    =f.input :start_date, :as => :string, :input_html => { :'data-date' => true }
    =f.input :sublet, :label => "This is a sublet"

    -show_end_date = f.object.sublet? ? '' : 'hidden'
    =f.input :end_date, :as => :string, :wrapper_html => { :class => show_end_date }, :input_html => { :'data-date' => true }

    %h2 Upload Photos
    #upload_photos
      %p
        Research shows that most renters won't even view a listing without photos.  We require at least two:

      %a#upload{:'data-upload-path' => apartment_images_path(apartment)} Upload an image
      #upload_status

      #images
        -apartment.images.each do |image|
          =render "images/thumbnail", :image => image

    %h2 Apartment Extras
    %ul.features
      -Feature.all.each do |feature|
        %li.feature
          -field_id = "feature_#{feature.id}"
          =check_box_tag("apartment[feature_ids][]", feature.id, apartment.features.include?(feature), { :id => field_id })
          =label_tag field_id, feature.name

  -f.buttons do
    =f.commit_button
