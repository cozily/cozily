-semantic_form_for apartment do |f|
  =f.error_messages
  -f.inputs do
    =hidden_field_tag "apartment[feature_ids][]"
    -f.semantic_fields_for :address do |fields|
      =fields.input :full_address, :label => "Address"
    =f.input :rent
    =f.input :bedrooms
    =f.input :bathrooms
    =f.input :square_footage

    -Feature.all.each do |feature|
      %li
        -field_id = "feature_#{feature.id}"
        =label_tag field_id, feature.name
        =check_box_tag("apartment[feature_ids][]", feature.id, apartment.features.include?(feature), { :id => field_id })

  -f.buttons do
    =f.commit_button