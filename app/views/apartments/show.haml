:javascript
  var address = #{@apartment.address.to_json};

-if can? :edit, @apartment
  =link_to "edit apartment", edit_apartment_path(@apartment)

=render "favorites/link", :apartment => @apartment
=render "flags/link", :apartment => @apartment

-if can? :edit, @apartment
  -@apartment.state_transitions.each do |transition|
    -semantic_form_for @apartment do |form|
      -form.inputs do
        =form.input :state, :value => transition.to, :as => :hidden
      -form.buttons do
        =form.commit_button transition.event.to_s

%dl
  %dt Address
  %dd=@apartment.address.full_address
  %dt Neighborhood
  %dd
    -if @apartment.neighborhood.present?
      =link_to @apartment.neighborhood.name, @apartment.neighborhood
    -else
      Unknown
  %dt Rent
  %dd=@apartment.rent
  %dt Bedrooms
  %dd=@apartment.bedrooms
  %dt Bathrooms
  %dd=@apartment.bathrooms
  %dt Square footage
  %dd=@apartment.square_footage

%ul
  -@apartment.features.each do |feature|
    %li=feature.name

#map_canvas
